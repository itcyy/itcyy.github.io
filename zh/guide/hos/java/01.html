<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HarmonyOS app 开发应用框架的架构和组成（Java） | 阿诺斯编程学习基地</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="欢迎来到我的地盘">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.c7e71d16.js" as="script"><link rel="preload" href="/assets/js/2.733019b2.js" as="script"><link rel="preload" href="/assets/js/29.44258244.js" as="script"><link rel="prefetch" href="/assets/js/10.42fb2994.js"><link rel="prefetch" href="/assets/js/11.07a7926b.js"><link rel="prefetch" href="/assets/js/12.f14ef4bc.js"><link rel="prefetch" href="/assets/js/13.bad5c579.js"><link rel="prefetch" href="/assets/js/14.b4f2a0cc.js"><link rel="prefetch" href="/assets/js/15.fbcdfabd.js"><link rel="prefetch" href="/assets/js/16.778523ff.js"><link rel="prefetch" href="/assets/js/17.e40f4083.js"><link rel="prefetch" href="/assets/js/18.a47bc1c5.js"><link rel="prefetch" href="/assets/js/19.2119da09.js"><link rel="prefetch" href="/assets/js/20.9341006e.js"><link rel="prefetch" href="/assets/js/21.3d47724d.js"><link rel="prefetch" href="/assets/js/22.17b4245a.js"><link rel="prefetch" href="/assets/js/23.6508d180.js"><link rel="prefetch" href="/assets/js/24.896cf2e4.js"><link rel="prefetch" href="/assets/js/25.5f0bc684.js"><link rel="prefetch" href="/assets/js/26.4c4d6f2d.js"><link rel="prefetch" href="/assets/js/27.1dd4ea73.js"><link rel="prefetch" href="/assets/js/28.137d32b4.js"><link rel="prefetch" href="/assets/js/3.1aa3be4a.js"><link rel="prefetch" href="/assets/js/30.f746f063.js"><link rel="prefetch" href="/assets/js/4.d12742be.js"><link rel="prefetch" href="/assets/js/5.216cae74.js"><link rel="prefetch" href="/assets/js/6.2d0a63f8.js"><link rel="prefetch" href="/assets/js/7.9c9172a7.js"><link rel="prefetch" href="/assets/js/8.113fcfe2.js"><link rel="prefetch" href="/assets/js/9.ac509f23.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/index.png" alt="阿诺斯编程学习基地" class="logo"> <span class="site-name can-hide">阿诺斯编程学习基地</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/zh/guide/go/" class="nav-link">
  Go开发
</a></div><div class="nav-item"><a href="/zh/guide/gin/" class="nav-link">
  Gin
</a></div><div class="nav-item"><a href="/zh/guide/blog/" class="nav-link">
  Go博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HarmonyOS" class="dropdown-title"><span class="title">HarmonyOS</span> <span class="arrow down"></span></button> <button type="button" aria-label="HarmonyOS" class="mobile-dropdown-title"><span class="title">HarmonyOS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/guide/hos/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/hos/ets/" class="nav-link">
  eTS
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/zh/guide/go/" class="nav-link">
  Go开发
</a></div><div class="nav-item"><a href="/zh/guide/gin/" class="nav-link">
  Gin
</a></div><div class="nav-item"><a href="/zh/guide/blog/" class="nav-link">
  Go博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HarmonyOS" class="dropdown-title"><span class="title">HarmonyOS</span> <span class="arrow down"></span></button> <button type="button" aria-label="HarmonyOS" class="mobile-dropdown-title"><span class="title">HarmonyOS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/guide/hos/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/hos/ets/" class="nav-link">
  eTS
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/zh/guide/hos/java/" aria-current="page" class="sidebar-link">HarmonyOS历史</a></li><li><a href="/zh/guide/hos/java/01.html" aria-current="page" class="active sidebar-link">HarmonyOS app 开发应用框架的架构和组成（Java）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/guide/hos/java/01.html#应用框架组成" class="sidebar-link">应用框架组成</a></li><li class="sidebar-sub-header"><a href="/zh/guide/hos/java/01.html#harmonyos应用部署运行" class="sidebar-link">HarmonyOS应用部署运行</a></li><li class="sidebar-sub-header"><a href="/zh/guide/hos/java/01.html#ability" class="sidebar-link">Ability</a></li><li class="sidebar-sub-header"><a href="/zh/guide/hos/java/01.html#进程" class="sidebar-link">进程</a></li><li class="sidebar-sub-header"><a href="/zh/guide/hos/java/01.html#用户程序框架" class="sidebar-link">用户程序框架</a></li><li class="sidebar-sub-header"><a href="/zh/guide/hos/java/01.html#ui编程框架" class="sidebar-link">UI编程框架</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="harmonyos-app-开发应用框架的架构和组成-java"><a href="#harmonyos-app-开发应用框架的架构和组成-java" class="header-anchor">#</a> HarmonyOS app 开发应用框架的架构和组成（Java）</h1> <hr> <h2 id="应用框架组成"><a href="#应用框架组成" class="header-anchor">#</a> 应用框架组成</h2> <p><img src="https://www.itcyy.cn/nailong/img/img/%E5%9B%BE%E7%89%871.png" alt=""></p> <p>​	应用框架，简单来说可以理解为面对开发者的一个应用接口。我们可以简单来看，左边就是部署态的示意图们可以看出部署态有UI描述，业务逻辑代码，共享库，配置文件来组成。一般来说，我们的应用会有我们的组件，布局还有实现交互作用的业务逻辑代码，还有我们业务逻辑实现需要的第三方库和SDK以及我妈们的配置文件。当然我们也会有对应的一个运行态，资源管理等来将UI页面展现在用户的面前，当然在运行的时候也会进行一些包管理，任务管理等来辅助我们的程序执行。借助API和Kits等来实现我们软件的一些基本业务功能。</p> <h2 id="harmonyos应用部署运行"><a href="#harmonyos应用部署运行" class="header-anchor">#</a> HarmonyOS应用部署运行</h2> <p><img src="https://www.itcyy.cn/nailong/img/img/%E5%9B%BE%E7%89%872.png" alt=""></p> <p>我们在HarmonyOS将代码打包成一个app，这个app是由很多hap组成的，app打包完成后就会上传到云端，在云端会对我们的app进行检验和拆包，以实现我们app的基本功能和展现，根据不同的设备以及我们的hap功能等，我们就会部署到应用市场，然后在我们的端测侧，我们下载app就会将我们的app打包下载到我们的设备，我们的app运行主要包括了我们的UI和我们Ability。</p> <h2 id="ability"><a href="#ability" class="header-anchor">#</a> Ability</h2> <p><img src="https://www.itcyy.cn/nailong/img/img/%E5%9B%BE%E7%89%873.png" alt=""></p> <div class="language- extra-class"><pre><code>		Ability  是应用所具备能力的抽象，也是应用程序的重要组成部分。一个应用可以具备多种能力（即可以包含多个 Ability），HarmonyOS 支持应用以 Ability 为单位进行部署。Ability 可以分为 FA（Feature Ability）和 PA（Particle Ability）两种类型，每种类型为开发者提供了不同的模板，以便实现不同的业务功能。你可以把我们的Ability理解为我们在鸿蒙开发里的一个基本单元，一个 Page 可以包含多个 AbilitySlice，但是 Page 进入前台时界面默认只展示一个AbilitySlice。默认展示的 AbilitySlice 是通过   setMainRoute()  方法来指定的。如果需要更改默认展示的 AbilitySlice，可以通过   addActionRoute()  方法为此 AbilitySlice 配置一条路由规则。此时，当其他 Page 实例期望导航到此 AbilitySlice 时，可以在 Intent 中指定 Action。 addActionRoute()  方法中使用的动作命名，需要在应用配置文件（ config.json ）中注册。
</code></pre></div><p>​			现在我们知道这个Page Ability是主要负责页面交互的，那么就可以理解为Android 的Activity。那么都知道Activity有生命周期，同样的Page Ability也是的。下面来看看它的生命周期。</p> <h3 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h3> <p><img src="https://www.itcyy.cn/nailong/img/img/%E5%9B%BE%E7%89%879.png" alt=""></p> <p>声明周期分别是 onStart() 、 onActive() 、 onInactive() 、 onBackground() 、 onForeground() 、 onStop()。</p> <ul><li>onStart()   当系统首次创建  Page Ability 实例时，触发该回调。对于一个  Page Ability 实例，该回调在其生命周期过程中仅触发一次， Page Ability 在该逻辑后将进入 INACTIVE 状态。开发者必须重写该方法，并在此配置默认展示的 AbilitySlice。</li> <li>onActive()      Page Ability 会在进入 INACTIVE 状态后来到前台，然后系统调用此回调。 Page Ability  在此之后进入ACTIVE 状态，该状态是应用与用户交互的状态。 Page Ability 将保持在此状态，除非某类事件发生导致  Page Ability 失去焦点，比如用户点击返回键或导航到其他  Page Ability 。当此类事件发生时，会触发 Page Ability 回到 INACTIVE 状态，系统将调用   onInactive()  回调。此后， Page Ability 可能重新回到ACTIVE 状态，系统将再次调用  onActive()  回调。因此，开发者通常需要成对实现   onActive()   和  onInactive() ，并在  onActive()  中获取在  onInactive()  中被释放的资源。</li> <li>onInactive()   当   Page Ability 失去焦点时，系统将调用此回调，此后 Page 进入 INACTIVE 状态。开发者可以在此回调中实现 Page 失去焦点时应表现的恰当行为。</li> <li>onBackground()   如果  Page Ability 不再对用户可见，系统将调用此回调通知开发者用户进行相应的资源释放，此后 Page Ability 进入 BACKGROUND 状态。开发者应该在此回调中释放  Page Ability  不可见时无用的资源，或在此回调中执行较为耗时的状态保存操作。</li> <li>onForeground()   处于 BACKGROUND 状态的  Page Ability 仍然驻留在内存中，当重新回到前台时（比如用户重新导航到此  Page Ability ），系统将先调用 onForeground()回调通知开发者，而后 Page 的生命周期状态回到 INACTIVE 状态。开发者应当在此回调中重新申请在 onBackground()中释放的资源，最后 Page 的生命周期状态进一步回到 ACTIVE 状态，系统将通过 onActive()回调通知开发者用户。</li> <li>onStop()   系统将要销毁  Page Ability 时，将会触发此回调函数，通知用户进行系统资源的释放。</li></ul> <h3 id="ability类型"><a href="#ability类型" class="header-anchor">#</a> Ability类型</h3> <p><img src="https://www.itcyy.cn/nailong/img/img/%E5%9B%BE%E7%89%874.png" alt=""></p> <p>我们的Ability分成服务Ability和数据Ability。<strong>服务Ability</strong> 和数据Ability，就是服务能力和数据能力。Service用于提供后台运行任务的能力。Data 用于对外部提供统一的数据访问抽象。在配置文件（config.json）中注册 Ability 时，可以通过配置 Ability 元素中的“type”属性来指定 Ability 模板类型。</p> <h2 id="进程"><a href="#进程" class="header-anchor">#</a> 进程</h2> <p><img src="https://www.itcyy.cn/nailong/img/img/%E5%9B%BE%E7%89%8710.png" alt=""></p> <p>在HarmonyOS设计中，是允许我们的外度的与安全服务的，其实我们的app是可以灵活组装，灵活多变的，它除了我们的一些公共线程外，也是有一个其他的元服务线程。这个其他的元服务可以来自其他的设备也可以来自云侧，这也就体现了我们HarmonyOS的一个底层互联的能力。</p> <h2 id="用户程序框架"><a href="#用户程序框架" class="header-anchor">#</a> 用户程序框架</h2> <p><img src="https://www.itcyy.cn/nailong/img/img/%E5%9B%BE%E7%89%876.png" alt=""></p> <h2 id="ui编程框架"><a href="#ui编程框架" class="header-anchor">#</a> UI编程框架</h2> <p><img src="https://www.itcyy.cn/nailong/img/img/%E5%9B%BE%E7%89%875.png" alt=""></p> <p>在我们HarmonyOS app开发中，主要有两种方式，一种是命令式，一种是声明式，在目前看来，华为HarmonyOS app开发主要还是依靠Java来进行开放，目前主推语言依然是Java。</p> <p><img src="https://www.itcyy.cn/nailong/img/img/%E5%9B%BE%E7%89%877.png" alt=""></p> <p><img src="https://www.itcyy.cn/nailong/img/img/%E5%9B%BE%E7%89%878.png" alt=""></p> <p>通过Java的一个多线程开发，我们的zpp组件，布局，其实最终是交给我们的GPU来进行渲染，从而让用户进行使用，我们Java UI 的一个开发也就是一个组件优化过程和处理，以及底层逻辑的实现。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zh/guide/hos/java/" class="prev router-link-active">
        HarmonyOS历史
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c7e71d16.js" defer></script><script src="/assets/js/2.733019b2.js" defer></script><script src="/assets/js/29.44258244.js" defer></script>
  </body>
</html>
